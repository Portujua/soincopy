<div class="buscar" ng-controller="Guia">	
	Ver guías con status de 
	<select ng-options="e.val as e.nombre for e in estados" ng-model="buscar_status" ng-change="cargar_guias()"></select>
	<br/>

	Buscar <input type="text" ng-model="buscador" placeholder="Ej. 19393, Pedro Perez, 19/03/2016, etc." data-toggle="tooltip" data-placement="top" title="Se puede filtrar la información usando cualquier campo" />

	<script>
		$(document).ready(function(){
		    $('[data-toggle="tooltip"]').tooltip(); 
		});
	</script>

	<p ng-hide="guias">Cargando guías..</p>

	<table class="table table-stripped" ng-init="cargar_guias()" ng-show="guias">
		<thead>
			<th>&nbsp;</th>
			<th class="text-center">Código</th>
			<th class="text-center">Título</th>
			<th class="text-center">Profesor</th>
			<th class="text-center">Sección</th>
			<th class="text-center">Entregada por</th>
			<th class="text-center">Recibida por</th>
			<th class="text-center">Fecha de entrega</th>
		</thead>
		<tbody>
			<tr ng-repeat="g in guias" 
				ng-if="!buscador || 
						g.codigo.indexOf(buscador) != -1 ||
						g.titulo.indexOf(buscador) != -1 ||
						g.profesor.nombre_completo.indexOf(buscador) != -1 ||
						g.seccion.indexOf(buscador) != -1 ||
						g.entregada_por.nombre_completo.indexOf(buscador) != -1 ||
						g.recibida_por.nombre_completo.indexOf(buscador) != -1 ||
						g.fecha.indexOf(buscador) != -1">
				<td class="text-center">
					<div class="btn-group">
						<a ng-show="loginService.getCurrentUser().modificar_guias" href="./#/modificarguia/{{g.codigo}}">
							<span data-toggle="tooltip" data-placement="top" class="glyphicon glyphicon-pencil" aria-hidden="true" title="Editar"></span>
						</a>

						<a ng-show="g.pdf" target="_blank" href="" ng-click="ver_pdf(g.pdf)"><span data-toggle="tooltip" data-placement="top" class="glyphicon glyphicon-search" aria-hidden="true" title="Ver guía"></span></a>

						<span data-toggle="tooltip" data-placement="top" ng-show="g.status != 2" ng-click="cambiar_estado(2, g.codigo)" class="text-info glyphicon glyphicon-ban-circle" aria-hidden="true" title="Deshabilitar"></span>
						<span data-toggle="tooltip" data-placement="top" ng-show="g.status != -1" ng-click="cambiar_estado(-1, g.codigo)" class="text-danger glyphicon glyphicon-remove-circle" aria-hidden="true" title="Remover"></span>
						<span data-toggle="tooltip" data-placement="top" ng-show="g.status != 1" ng-click="cambiar_estado(1, g.codigo)" class="text-success glyphicon glyphicon-ok-circle" aria-hidden="true" title="Aprobar"></span>

						<script>
							$('[data-toggle="tooltip"]').tooltip(); 
						</script>
					</div>
				</td>
				<td class="text-center">{{ g.codigo }}</td>
				<td class="text-center">{{ g.titulo }}</td>
				<td class="text-center">{{ g.profesor.nombre_completo }}</td>
				<td class="text-center">{{ g.seccion }}</td>
				<td class="text-center">{{ g.entregada_por.nombre_completo }}</td>
				<td class="text-center">{{ g.recibida_por.nombre_completo }}</td>
				<td class="text-center">{{ g.fecha }} a las {{ g.hora }}</td>
			</tr>
		</tbody>
	</table>
</div>