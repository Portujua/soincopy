<div class="buscar" ng-controller="Guia">	
	<h1 style="font-size: 20px;">Guías</h1>

	<p>
		<a href="./#/agregarguia" class="btn btn-soincopy" ng-show="loginService.getCurrentUser().anadir_guias"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Agregar</a>
	</p>

	Ver guías con status de 
	<select ng-options="e.val as e.nombre for e in estados" ng-model="buscar_status"></select> <button class="btn btn-soincopy" ng-click="cargar_guias()">Buscar</button>
	<br/>

	<div class="botones">
		<div ng-show="g_">
			<a class="btn btn-primary" ng-show="loginService.getCurrentUser().modificar_guias" href="./#/modificarguia/{{g_.codigo}}">
				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar
			</a>

			<a class="btn btn-warning" ng-show="g_.pdf" target="_blank" href="" ng-click="ver_pdf(g_.pdf)">
				<span class="glyphicon glyphicon-search" aria-hidden="true"></span> Ver guía
			</a>

			<button class="btn btn-info" ng-show="g_.status != 2 && loginService.getCurrentUser().modificar_guias" ng-click="cambiar_estado(2, g_.codigo)">
				<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span> Deshabilitar
			</button>

			<button class="btn btn-danger" ng-show="g_.status != -1 && loginService.getCurrentUser().modificar_guias" ng-click="cambiar_estado(-1, g_.codigo)">
				<span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> Rechazar
			</button>

			<button class="btn btn-success" ng-show="g_.status != 1 && loginService.getCurrentUser().modificar_guias" ng-click="cambiar_estado(1, g_.codigo)">
				<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span> Aprobar
			</button>
		</div>
	</div>

	Buscar <input type="text" ng-model="buscador" placeholder="Ej. 19393, Pedro Perez, 19/03/2016, etc." data-toggle="tooltip" data-placement="top" title="Se puede filtrar la información usando cualquier campo" />

	<script>
		$(document).ready(function(){
		    $('[data-toggle="tooltip"]').tooltip(); 
		});
	</script>

	<p ng-hide="guias">Cargando guías..</p>

	<table class="table table-stripped" ng-init="cargar_guias()" ng-show="guias">
		<thead>
			<th class="text-center">Código</th>
			<th class="text-center">Título</th>
			<th class="text-center">Profesor</th>
			<th class="text-center">Sección</th>
			<th class="text-center">Entregada por</th>
			<th class="text-center">Recibida por</th>
			<th class="text-center">Fecha de entrega</th>
		</thead>
		<tbody ng-init="nroResultados = 25; actual = 0;">
			<tr ng-click="seleccionar(g)" ng-repeat="g in guias | paginar:nroResultados+'|'+actual" 
				ng-if="!buscador || 
						g.codigo.indexOf(buscador) != -1 ||
						g.titulo.indexOf(buscador) != -1 ||
						g.profesor.nombre_completo.indexOf(buscador) != -1 ||
						g.seccion.indexOf(buscador) != -1 ||
						g.entregada_por.nombre_completo.indexOf(buscador) != -1 ||
						g.recibida_por.nombre_completo.indexOf(buscador) != -1 ||
						g.fecha.indexOf(buscador) != -1"
				class="{{ g_.id == g.id ? 'bg-selected' : '' }}">
				<td class="text-center">{{ g.codigo }}</td>
				<td class="text-center">{{ g.titulo }}</td>
				<td class="text-center">{{ g.profesor.nombre_completo }}</td>
				<td class="text-center">{{ g.seccion }}</td>
				<td class="text-center">{{ g.entregada_por.nombre_completo }}</td>
				<td class="text-center">{{ g.recibida_por.nombre_completo }}</td>
				<td class="text-center">{{ g.fecha }} a las {{ g.hora }}</td>
			</tr>
		</tbody>
	</table>

	<div class="text-center" ng-show="nroResultados < guias.length">
		<ul class="pagination">
			<li ng-repeat="i in paginationCount(nroResultados, guias.length)" class="{{ actual == i ? 'active' : '' }}">
				<a href="" ng-click="$parent.actual = i;">{{ i + 1 }}</a>
			</li>
		</ul>
	</div>
</div>